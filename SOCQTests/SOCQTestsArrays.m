//
//  SOCQTestsArrays.m
//  SOCQTestsArrays
//
//  Created by Adam Burkepile on 2/4/12.
//  Copyright (c) 2012 Adam Burkepile. All rights reserved.
//

#import "SOCQTestsArrays.h"
#import "SOCQ+NSArray.h"

@implementation SOCQTestsArrays

- (void)setUp
{
    [super setUp];
    
    testArray = [NSArray arrayWithObjects:@"Red", 
                 @"Green", 
                 @"Blue", 
                 @"Yellow", 
                 @"Black", 
                 @"White", 
                 @"Brown",nil];
}

- (void)tearDown
{
    // Tear-down code here.
    
    [super tearDown];
}

#pragma mark - take Tests

- (void)testArrayTakeOverCount
{
    NSArray* ret = [testArray take:[testArray count] + 1];
    
    STAssertEquals([ret count], [testArray count], @"Return array count mismatch");
}

- (void)testArrayTakeOver
{
    NSArray* ret = [testArray take:[testArray count] + 1];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i], @"Object doesn't match");
    }
}

- (void)testArrayTakeNone
{
    NSArray* ret = [testArray take:0];
    
    STAssertEquals([ret count], (NSUInteger)0, @"Return array count mismatch");
}

- (void)testArrayTakeSomeCount
{
    NSArray* ret = [testArray take:3];
    
    STAssertEquals([ret count], (NSUInteger)3, @"Return array count mismatch");
}

- (void)testArrayTakeSome
{
    NSArray* ret = [testArray take:3];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i], @"Object doesn't match");
    }
}

#pragma mark - skip Tests

- (void)testArraySkipNoneCount {
    NSUInteger skipAmount = 0;
    NSArray* ret = [testArray skip:skipAmount];
    
    STAssertEquals([ret count], [testArray count]-skipAmount, @"Return array count mismatch");
}
- (void)testArraySkipSomeCount {
    NSUInteger skipAmount = 3;
    NSArray* ret = [testArray skip:skipAmount];
    
    STAssertEquals([ret count], [testArray count]-skipAmount, @"Return array count mismatch");
}
- (void)testArraySkipAllCount {
    NSUInteger skipAmount = 7;
    NSArray* ret = [testArray skip:skipAmount];
    
    STAssertEquals([ret count], [testArray count]-skipAmount, @"Return array count mismatch");
}
- (void)testArraySkipOverCount {
    NSUInteger skipAmount = [testArray count]+1;
    NSArray* ret = [testArray skip:skipAmount];
    
    STAssertEquals([ret count], (NSUInteger)0, @"Return array count mismatch");
}


- (void)testArraySkipNone {
    NSUInteger skipAmount = 0;
    NSArray* ret = [testArray skip:skipAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}
- (void)testArraySkipSome {
    NSUInteger skipAmount = 3;
    NSArray* ret = [testArray skip:skipAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}
- (void)testArraySkipAll {
    NSUInteger skipAmount = 7;
    NSArray* ret = [testArray skip:skipAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}
- (void)testArraySkipOver {
    NSUInteger skipAmount = [testArray count]+1;
    NSArray* ret = [testArray skip:skipAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}

#pragma mark - skip take Tests

- (void)testArraySkipSomeTakeSomeCount {
    NSUInteger skipAmount = 3;
    NSUInteger takeAmount = 3;
    NSArray* ret = [testArray skip:skipAmount take:takeAmount];
    
    STAssertEquals([ret count], takeAmount, @"Return array count mismatch");
}
- (void)testArraySkipSomeTakeOverCount {
    NSUInteger skipAmount = 3;
    NSArray* ret = [testArray skip:skipAmount take:[testArray count]];
    
    STAssertEquals([ret count], [testArray count]-skipAmount, @"Return array count mismatch");
}

- (void)testArraySkipSomeTakeSome {
    NSUInteger skipAmount = 3;
    NSUInteger takeAmount = 3;
    NSArray* ret = [testArray skip:skipAmount take:takeAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}
- (void)testArraySkipSomeTakeOver {
    NSUInteger skipAmount = 3;
    NSUInteger takeAmount = [testArray count];
    NSArray* ret = [testArray skip:skipAmount take:takeAmount];
    
    for (int i = 0 ; i < [ret count] ;i++) {
        STAssertEqualObjects([ret objectAtIndex:i],
                             [testArray objectAtIndex:i+skipAmount], @"Object doesn't match");
    }
}

#pragma mark - where Tests

- (void)testArrayWhereCount {
    NSArray* ret = [testArray where:^BOOL(id obj) {
        NSString* color = obj;
        
        return [color length] == 5;
    }];
    
    STAssertEquals([ret count], (NSUInteger)4, @"Return array count mismatch");
}

#pragma mark - any Tests
- (void)testAnyNone {
    STAssertFalse([testArray any:^BOOL(id obj) {
        return [obj length] == 2;
    }], @"Statement should be false");
}
- (void)testAnySome {
    STAssertTrue([testArray any:^BOOL(id obj) {
        return [obj length] == 4;
    }], @"Statement should be true");
}
- (void)testAnyAll {
    STAssertTrue([testArray any:^BOOL(id obj) {
        return [obj length] >= 1;
    }], @"Statement should be true");
}

#pragma mark - any Tests
- (void)testAllNone {
    STAssertFalse([testArray all:^BOOL(id obj) {
        return [obj length] >= 10;
    }], @"Statement should be false");
}
- (void)testAllSome {
    STAssertFalse([testArray all:^BOOL(id obj) {
        return [obj length] >= 4;
    }], @"Statement should be false");
}
- (void)testAllAll {
    STAssertTrue([testArray all:^BOOL(id obj) {
        return [obj length] >= 1;
    }], @"Statement should be true");
}
@end
